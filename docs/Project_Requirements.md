| Requirement ID | Description                               | User Story                                                                                                                                               | Expected Behavior / Outcome                                                                                                                                                                                  | Status |
| :------------- | :---------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :----- |
| FR-001         | Global Hotkey Listener                    | As a user, I want the application to listen for a specific hotkey combination (`Ctrl + Shift + .`) system-wide so I can trigger it from any application. | The application runs in the background. Pressing `Ctrl + Shift + .` anywhere in Windows triggers the text capture and AI interaction flow.                                                                   | MUS    |
| FR-002         | Selected Text Capture (Clipboard Method)  | As a user, I want the application to capture the text I have highlighted when I press the hotkey.                                                        | When the hotkey is pressed, the application programmatically copies the selected text to the clipboard and stores it internally for processing. The user's original clipboard content is overwritten.        | MUS    |
| FR-003         | Local Ollama Integration                  | As a user, I want the captured text to be sent to my local Ollama instance for processing.                                                               | The application sends the captured text to a hardcoded Ollama API endpoint (e.g., `http://localhost:11434`) and can handle a streaming response.                                                             | MUS    |
| FR-004         | Basic GUI Overlay                         | As a user, I want a small window to appear on my screen where I can see the AI's response being generated.                                               | A simple, frameless GUI window appears at the current mouse cursor's position when the hotkey is triggered.                                                                                                  | MUS    |
| FR-005         | Real-time Response Streaming              | As a user, I want to see the AI's response appear word-by-word in the overlay, not all at once at the end.                                               | Text chunks received from the Ollama streaming API are immediately rendered inside the GUI overlay, giving a real-time "typing" effect.                                                                      | MUS    |
| FR-006         | Copy Response Functionality               | As a user, I want to easily copy the full response from the overlay to my clipboard.                                                                     | The overlay window contains a "Copy" button. Clicking it copies the entire generated text to the system clipboard and closes the overlay.                                                                    | MUS    |
| FR-007         | Overlay Dismissal                         | As a user, I want to be able to close the overlay window easily.                                                                                         | The overlay can be closed by pressing the `Esc` key or by clicking a dedicated "Close" or "X" button on the overlay itself.                                                                                  | MUS    |
| FR-008         | Robust Text Capture (UI Automation)       | As a user, I want the app to capture selected text without overwriting my clipboard.                                                                     | The "Clipboard Hack" method (FR-002) is replaced with the Windows UI Automation API for non-destructive and more reliable text capture.                                                                      | Future |
| FR-009         | Cloud Model Configuration                 | As a user, I want to connect the app to cloud-based LLMs like OpenAI by providing my API key.                                                            | A settings interface is created where a user can enter and save API keys for supported cloud providers (e.g., OpenAI). Keys must be stored securely.                                                         | Future |
| FR-010         | Multi-Model Selection                     | As a user, I want to choose which AI model (local Ollama or a configured cloud model) to use for my query.                                               | The settings interface (or a right-click menu on a tray icon) allows the user to select from a list of available local Ollama models and configured cloud models.                                            | Future |
| FR-011         | "Insert" Text Functionality               | As a user, I want the option to insert the AI's response directly into the application I'm working in.                                                   | The overlay window has an "Insert" (or "Replace") button. Clicking it pastes the generated text at the user's current cursor location, replacing the originally selected text.                               | Future |
| FR-012         | Context-Aware Overlay Positioning         | As a user, I want the overlay to appear intelligently next to the text I selected, not just where my mouse is.                                           | The application determines the screen coordinates of the highlighted text and positions the GUI overlay adjacent to it.                                                                                      | Future |
| FR-013         | System Tray Icon and Management           | As a user, I want a persistent way to manage the app (e.g., open settings, quit) without a main window.                                                  | The application has an icon in the Windows system tray. Right-clicking this icon provides a menu with options like "Settings" and "Quit."                                                                    | Future |
| FR-014         | Configuration Persistence                 | As a user, I want my settings (API keys, selected model) to be saved between application restarts.                                                       | The application saves user configurations to a local file (e.g., JSON or INI) and loads them on startup.                                                                                                     | Future |
| FR-015         | Direct Text Streaming (Typing Simulation) | As a user, I want the AI's response to be typed out directly where my cursor is, for a more seamless workflow.                                           | When this mode is active, the application will receive streaming text from the LLM and simulate keyboard presses to "type" the response into the focused application at the cursor's current position.       | Future |
| FR-016         | Output Mode Selection                     | As a user, I want to choose in the settings whether the AI response appears in a popup or is typed directly into my active window.                       | A setting (e.g., a dropdown or radio buttons) is added to the settings interface. The user's choice between "Popup Overlay" and "Direct Stream" is saved and respected by the application on hotkey trigger. | Future |
| FR-017         | Clipboard Context Command                 | As a user, I want to use text from my clipboard as context for a command I select on screen, so I can perform two-part tasks like translation or summarization more efficiently. | User copies "subject" text to the clipboard. User then selects an "instruction" text (e.g., "translate to French"). Pressing the new hotkey (`Ctrl+Alt+/`) sends both the clipboard content and the selected text to the LLM, which then executes the instruction on the subject. | Future |
| FR-022         | Centralized Settings Window               | As a user, I want a single settings window to manage all application options so I don't have to edit config files or use multiple menus. | The system tray menu has a "Settings..." option that opens a comprehensive window. This window contains controls for all user-configurable options (model, API keys, system prompt, etc.).  | Future |
| FR-023         | Graceful Error Handling & Notifications   | As a user, I want to be clearly notified when something goes wrong so I understand what the problem is and how to fix it.                | When an error occurs (e.g., no network, invalid API key, Ollama server down), the application displays a non-blocking system tray notification detailing the issue. The app does not crash. | Future |
| FR-024         | Launch on System Startup                  | As a user, I want the application to start automatically when I log into Windows so it's always ready to use.                            | The settings window contains a "Launch on system startup" checkbox. When checked, the application will automatically run after the user logs in. The setting is persistent.                 | Future |
| FR-031         | Real-time Event Notifications             | As a user, I want to receive system notifications for key events and errors so I know what the application is doing without checking the console. | The app sends non-intrusive system tray notifications for events like "Processing query," "Connection error," "Clipboard empty," etc. This can be toggled in settings. | Complete |
| FR-032         | Application Restart Control               | As a user, I want a "Restart" button in the system tray so I can easily reload the application if it becomes unresponsive or to apply certain settings. | The system tray menu includes a "Restart" option. Clicking it saves the current state (like history) and cleanly restarts the application. | Complete |
| FR-033         | Stop Streaming via Hotkey                 | As a user, I want to press the `Esc` key to immediately stop a "Direct Stream" in progress so I can prevent it from typing in the wrong window if I change focus. | While a direct stream is active, pressing the `Esc` key globally will instantly terminate the typing. The `Esc` key functions normally at all other times. | Complete |
| FR-034         | Auto-Pause/Resume on Focus Change          | As a user, I want the "Direct Stream" to automatically pause if I switch to a different application and resume when I return, for a seamless and error-proof experience. | When a direct stream starts, it targets the active window. If the user's focus shifts to a different window, typing pauses. If focus returns to the original target window, typing resumes. | Complete |
